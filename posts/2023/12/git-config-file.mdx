---
title: 'Github 개인 계정 & 회사 계정 따로 관리하기'
tags: ['Git']
summary: 'gitconfig 설정하는 방법에 대하여 대하여 대하여'
date: 2023-12-31 17:56:52
---

![](/image/github-001.png)

## Git config 수정의 번거로움

이전에 개인 깃헙 계정으로만 깃을 쓸 때는 몰랐는데 회사 깃헙 계정도 같이 쓰게 되니 매번 `push` 할 때마다 `git config`를 수정해야 하는 것이 너무 귀찮고 번거로웠다. 어떻게 방법이 없을까 하고 생각만 하다가 이번에 방법을 찾아내서 적용해보았다. 잊지 않기 위해 기록해둔다.

## 1. SSH 키 분리

터미널을 켜고, 홈 디렉토리로 이동

```bash
$ cd ~
```

`.ssh` 디렉토리 생성 후 chmod로 권한 설정

```bash
$ mkdir ~/.ssh
$ chmod 700 ~/.ssh
$ cd .ssh
```

`your email`에 깃헙 메일 주소를 입력한다.

```bash
$ ssh-keygen -t rsa -b 4096 -C "your email"
```

개인용과 회사용 두 개의 key를 만들어야 하는데
`Enter file in which to save the key (/Users/daphne/.ssh/id_rsa):` 뒤에 개인용으로 `id_rsa` 회사용으로 `id_rsa_work`를 입력하여 비밀번호를 입력 후 각각 생성해준다.

```bash
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/daphne/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
```

키 생성이 정상적으로 되었다면 `ls -l`을 사용하면 확인이 가능하다.
아래 명령어를 입력해 생성한 공개 키를 복사해서 깃헙에 등록하자.
ssh-rsa 부터 your email 부분까지 모두 복사한다.

```bash
$ cat ~/.ssh/`id_rsa.pub`
ssh-rsa
~~~
your email
```

이제 github로 가서

![](/image/git-config-file-001.png)

`Settings` 클릭

![](/image/git-config-file-002.png)

`SSH and GPG keys` 클릭

![](/image/git-config-file-003.png)

`New SSH key` 클릭

![](/image/git-config-file-004.png)

개인용 SSH 키와 회사용 SSH 키를 `각각의 깃헙 계정에 등록`한다.

## 2. .gitconfig & .ssh/config 설정하기

vi 에디터를 이용해 `~/.ssh/config` 파일을 연다.

```bash
$ vim ~/.ssh/config
```

`HostName`은 깃헙에서 repo를 클론할때 SSH 주소 부분의 git@`github.com`에서 `github.com`을 의미한다.
`IdentityFile` 뒤에 생성했던 key를 연결한다.

```ini
# company
Host github.com-work
	HostName github.com
	User git
	IdentityFile ~/.ssh/id_rsa_work

# daphne
Host github.com
	HostName github.com
	User git
	IdentityFile ~/.ssh/id_rsa
```

vi 에디터를 이용해 `.gitconfig`을 수정한다.

```bash
vim ~/.gitconfig
```

`[user]` 부분에는 전역적으로 사용할 계정을 입력한다. 나는 전역적으로 사용할 계정으로 개인 계정을 입력했다.
회사용 작업 폴더를 만들어서 관리하고 싶었기에 `work`라는 폴더를 만들었다.
`[includeIf "gitdir:~/work/"]`에 아까 만든 폴더의 경로인 `work/`를 설정해 놓으면 해당 폴더 아래에서는 설정했던 SSH가 적용된다. 반드시 폴더명 뒤에 `/`를 붙여야한다.
마지막으로 `path` 부분에 아까 설정한 SSH의 `Host`를 입력하면 된다.

```ini
[user]
	name = your github name
	email = your email
[includeIf "gitdir:~/work/"]
	path = .gitconfig-work
```

이제 설정이 모두 끝났다.

## 3. git clone 하기

이제 git clone을 통해 받을 때 `.ssh/config`에서 설정한 Host를 이용한다.

개인 계정으로 받을 때

> git clone git@`github.com`/repository_name.git으로 받는다.

회사 계정으로 받을 때

> git clone git@`github-luna.com`/repository_name.git으로 받는다.

이제 `work` 폴더 아래의 폴더에서 `git config user.name`이나 `git config user.email`을 입력해보면 설정했던 회사용 깃헙 계정의 정보가 나올 것이고 `work` 폴더 밖에서 받은 것은 개인용 깃헙 계정 정보가 나올 것이다.
